@tailwind utilities;

@layer nou-ui {
  .list {
    view-transition-name: nou-toast-list;
    transition: all 0.4s ease-in-out allow-discrete;
    position: relative;

    &:is(:hover, :focus) {
      & > .toast {
        top: calc(anchor(bottom) + 1rem);
      }
    }
    & > .toast:nth-child(n + 5) {
      transition-delay: 400ms;
    }
    &:not(:hover, :focus, .expanded) > .toast:nth-child(n + 5) {
      @apply animate-out hidden fill-mode-forwards fade-out translate-y-2;
    }
  }

  .toast {
    min-width: 0;
    view-transition-class: nou-toast;
    opacity: 1;
    transition: 0.4s ease-out allow-discrete;
    transition-property: inset-block, transform, display;
    position: fixed;
    inset-block-start: anchor(start);
    inset-inline-start: anchor(end);

    &:nth-of-type(1) {
      z-index: 4;
    }
    &:nth-of-type(2) {
      z-index: 3;
      transform: scale(0.95) translateY(1rem);
    }
    &:nth-of-type(3) {
      z-index: 2;
      transform: scale(0.9) translateY(2rem);
    }
    &:nth-of-type(4) {
      z-index: 1;
      transform: scale(0.85) translateY(3rem);
    }
  }

  @starting-style {
    .toast {
      transform: translateY(-1rem);
    }
  }

  /* :global(html::view-transition-group(*.nou-toast)) {
    @apply duration-300 slide-in-from-top-0 ease-out fade-in-0;
  }

  :global(html::view-transition-new(nou-toast):only-child) {
    @apply animate-in slide-in-from-top-8 ease-out fade-in-0 duration-300;
  }

  :global(:root::view-transition-old(nou-toast-removed):only-child) {
    @apply animate-out slide-out-to-top-8 ease-in fade-out-0 duration-200;
  }

  :global(html::view-transition-new(nou-toast-latest):only-child) {
    @apply animate-out slide-out-to-top-8 ease-in fade-out-0 duration-200;
  } */
}
