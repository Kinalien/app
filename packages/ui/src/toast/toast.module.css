@tailwind utilities;

@layer nou-ui {
  .list {
    view-transition-name: nou-toast-list;
    transition: all 0.4s ease-in-out allow-discrete;
    position: fixed;
    min-width: theme(spacing.64);

    &:is(:hover, :focus) {
      & > .toast {
        inset-block-start: anchor(end);
        translate: 0;
        scale: 1;
      }
    }
    & > .toast:nth-child(n + 5) {
      @apply animate-out hidden fill-mode-forwards fade-out translate-y-2;
    }
  }

  .toast {
    pointer-events: auto;
    opacity: 1;
    transition:
      all 0.2s ease-out allow-discrete,
      translate 0.2s ease-out,
      scale 0.2s ease-out;
    position: absolute;
    inset-block-start: anchor(start);
    /* justify-self: anchor-center; */
    /* use padding instead of positioning to allow hover to remain stable for multiple toasts */
    padding: theme("spacing[1]");

    &:nth-of-type(1) {
      z-index: 4;
      justify-self: auto;
    }
    &:nth-of-type(2) {
      z-index: 3;
      translate: 0 2rem;
      scale: 0.9;
    }
    &:nth-of-type(3) {
      z-index: 2;
      translate: 0 4rem;
      scale: 0.85;
    }
    &:nth-of-type(4) {
      z-index: 1;
      translate: 0 6rem;
      scale: 0.8;
    }
  }

  @starting-style {
    .toast {
      transform: translateY(-1rem);
    }
  }

  /* :global(html::view-transition-group(*.nou-toast)) {
    @apply duration-300 slide-in-from-top-0 ease-out fade-in-0;
  }

  :global(html::view-transition-new(nou-toast):only-child) {
    @apply animate-in slide-in-from-top-8 ease-out fade-in-0 duration-300;
  }

  :global(:root::view-transition-old(nou-toast-removed):only-child) {
    @apply animate-out slide-out-to-top-8 ease-in fade-out-0 duration-200;
  }

  :global(html::view-transition-new(nou-toast-latest):only-child) {
    @apply animate-out slide-out-to-top-8 ease-in fade-out-0 duration-200;
  } */
}
